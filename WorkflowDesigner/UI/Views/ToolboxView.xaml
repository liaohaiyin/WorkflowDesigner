<UserControl x:Class="WorkflowDesigner.UI.Views.ToolboxView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignHeight="400" d:DesignWidth="250"
             Background="#FFFFFF">

    <UserControl.Resources>

        <!-- 工具箱项样式 -->
        <Style x:Key="ToolboxItemStyle" TargetType="Border">
            <Setter Property="Background" Value="#FAFAFA"/>
            <Setter Property="BorderBrush" Value="#E0E0E0"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Padding" Value="12"/>
            <Setter Property="CornerRadius" Value="6"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#E3F2FD"/>
                    <Setter Property="BorderBrush" Value="#2196F3"/>
                    <Setter Property="BorderThickness" Value="2"/>
                    <Setter Property="Effect">
                        <Setter.Value>
                            <DropShadowEffect Color="#2196F3" BlurRadius="5" ShadowDepth="0" Opacity="0.3"/>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </Style.Triggers>
        </Style>
    </UserControl.Resources>

    <!-- 工具项列表 -->
    <ScrollViewer VerticalScrollBarVisibility="Auto" 
                  HorizontalScrollBarVisibility="Disabled" Padding="5">
        <ItemsControl ItemsSource="{Binding ToolboxItems}">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Border Style="{StaticResource ToolboxItemStyle}"
                            MouseLeftButtonDown="ToolboxItem_MouseLeftButtonDown"
                            ToolTip="{Binding Description}">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- 图标和名称 -->
                            <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,6">
                                <TextBlock Text="{Binding Icon}" FontSize="22" 
                                           Foreground="{Binding IconColor, Converter={StaticResource ColorStringToBrushConverter}}"
                                           Margin="0,0,10,0" VerticalAlignment="Center"/>
                                <TextBlock Text="{Binding Name}" FontWeight="SemiBold" 
                                           FontSize="13" VerticalAlignment="Center"
                                           Foreground="#2C3E50"/>
                            </StackPanel>

                            <!-- 类别标签 -->
                            <Border Grid.Row="1" Background="#E8F5E8" CornerRadius="10" 
                                    Padding="6,2" HorizontalAlignment="Left" Margin="0,0,0,4">
                                <TextBlock Text="{Binding Category}" FontSize="9" 
                                           Foreground="#2E7D32" FontWeight="Medium"/>
                            </Border>

                            <!-- 描述 -->
                            <TextBlock Grid.Row="2" Text="{Binding Description}" FontSize="10" 
                                       Foreground="#757575" TextWrapping="Wrap"
                                       LineHeight="14" MaxHeight="30" 
                                       TextTrimming="CharacterEllipsis"/>
                        </Grid>
                    </Border>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </ScrollViewer>
</UserControl>